<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
		<%= stylesheet_link_tag "normalize", "all" %>
		<%= javascript_include_tag "all" %>
		<title>Koen.pt<% if current_page.data.title %> | <%= current_page.data.title %><% end %></title>
	</head>
	<body class="<%= page_classes %>">
		<div class="container">
			<div id="main" role="main">
				<h1><a href="/">Koen.pt</a></h1>
				<h2><%= current_page.data.title %></h2>
				<%= yield %>
			</div>
			<aside>
				<h2>Recent Articles</h2>
				<ol>
					<% blog.articles[0...10].each do |article| %>
					<li><%= link_to article.title, article %> <span><%= article.date.strftime('%b %e') %></span></li>
					<% end %>
				</ol>

				<h2>Tags</h2>
				<ol>
					<% blog.tags.each do |tag, articles| %>
					<li><%= link_to tag, tag_path(tag) %> (<%= articles.size %>)</a></li>
					<% end %>
				</ol>

				<h2>By Year</h2>
				<ol>
					<% blog.articles.group_by {|a| a.date.year }.each do |year, articles| %>
					<li><%= link_to year, blog_year_path(year) %> (<%= articles.size %>)</a></li>
					<% end %>
				</ol>
			</aside>
		</div>
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-770386-7']);
			_gaq.push(['_trackPageview']);
		
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>
	</body>
</html>
